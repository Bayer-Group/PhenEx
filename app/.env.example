############
# Database Config
############

POSTGRES_HOST=db
POSTGRES_PASSWORD=password
POSTGRES_DB=phenex
POSTGRES_USER=phenex
POSTGRES_PORT=5432
COHORTS_SCHEMA=public
COHORTS_TABLE=cohort

############
# Backend Config
############

# Python Path
PYTHONPATH=/app

# Authentication
# Database connection string for SQLAlchemy ORM
# IMPORTANT: This URL must match the database config above!
# Format: postgresql+psycopg://{POSTGRES_USER}:{POSTGRES_PASSWORD}@{POSTGRES_HOST}:{POSTGRES_PORT}/{POSTGRES_DB}
PHENEX_DATABASE__URL=postgresql+psycopg://phenex:password@db:5432/phenex
# Enable SQL query logging (set to False in production for performance)
PHENEX_DATABASE__ECHO=True

# Azure AD Authentication (Enterprise SSO)
# Configure these if using Azure Active Directory for authentication
PHENEX_AUTH__AD__TENANT=your-azure-ad-tenant-id
PHENEX_AUTH__AD__AUD=your-azure-ad-audience-id
PHENEX_AUTH__AD__CLAIMS__0__MAPPED_TO=external_id
PHENEX_AUTH__AD__CLAIMS__0__NAME=https://bayer.com/cwid
PHENEX_AUTH__AD__CLAIMS__1__MAPPED_TO=name
PHENEX_AUTH__AD__CLAIMS__1__NAME=name
PHENEX_AUTH__AD__CLAIMS__2__MAPPED_TO=email
PHENEX_AUTH__AD__CLAIMS__2__NAME=email

# Password Authentication (JWT)
# Secret key used to sign JWT tokens - change this to a secure random string in production
PHENEX_AUTH__PASSWORD__SECRET=your-password-secret

# Anonymous Authentication (Development Only)
PHENEX_AUTH__ANONYMOUS__TOKEN=anon-user
PHENEX_AUTH__ANONYMOUS__USER_ID=c0799d5d-2bdf-4da4-8496-4f6d44b8fd26

# MedCONB Integration (Optional)
PHENEX_MEDCONB__API_URL="https://backend.medconb.example.com/graphql/"
PHENEX_MEDCONB__AZURE_CLIENT_ID="medconb-ad-client-id"

# Azure OpenAI Configuration (Optional - for AI-powered features)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
OPENAI_API_VERSION=2025-01-01-preview

# Snowflake Configuration (Optional - for data warehouse integration)
# Credentials for connecting to Snowflake data warehouse
SNOWFLAKE_USER=your-snowflake-username
SNOWFLAKE_PASSWORD=your-snowflake-password
SNOWFLAKE_ACCOUNT=your-snowflake-account
SNOWFLAKE_WAREHOUSE=your-snowflake-warehouse
SNOWFLAKE_ROLE=your-snowflake-role

# User Configuration
# UUID of the "public" user who owns public/shared cohorts and studies
# Also used for anonymous authentication and sample data
PUBLIC_USER_ID=c0799d5d-2bdf-4da4-8496-4f6d44b8fd26
DEFAULT_USER_PASSWORD=phenex
DEFAULT_USER_EMAIL_PUBLIC=public@phenex.ai
DEFAULT_USER_EMAIL_1=test@phenex.ai
DEFAULT_USER_EMAIL_2=test2@phenex.ai

# RAG (Retrieval Augmented Generation) Configuration
RAG_MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2
RAG_CACHE=/data/_model_cache

# Storage
# Directory where cohort definitions are stored
COHORTS_DIR=/data/cohorts

############
# UI - Configuration for the React frontend.
############
# Backend API URL that the frontend will connect to
VITE_BACKEND_URL=http://localhost:8000
# Allowed hosts for CORS (comma-separated if multiple)
VITE_ALLOWED_HOSTS=http://localhost:5173

# Enable anonymous user authentication in the UI (development only)
ENABLE_ANONYMOUS_USERS=false
